/*! jrl-utils, built 2016-05-04T05:43:48-0400 | (C) 2016 Jeff Lambert | License: MIT */
!function(){"use strict";var app=angular.module("jrl.utils",[]);app.factory("common",["$window",function($window){function getLogFn(locality,level){function logSuccess(msg,context){enableDebugLogging&&console.log("["+locality+"][success] "+msg,context)}function logInfo(msg,context){enableDebugLogging&&console.info("["+locality+"][info] "+msg,context)}function logError(msg,context){enableDebugLogging&&console.error("["+locality+"][error] "+msg,context)}function logWarn(msg,context){msg="["+locality+"][warning] "+msg,enableDebugLogging&&(console.warn?console.warn(msg,context):console.log(msg,context))}switch(level){case"success":return logSuccess;case"info":return logInfo;case"warn":return logWarn;case"error":default:return logError}}function toastSuccess(message,title){return $window.toastr?void $window.toastr.success(message,title?title:""):void logSuccess("(toast) "+message,title)}function toastInfo(message,title){return $window.toastr?void $window.toastr.info(message,title?title:""):void logInfo("(toast) "+message,title)}function toastWarning(message,title){return $window.toastr?void $window.toastr.warning(message,title?title:""):void logWarn("(toast) "+message,title)}function toastError(message,title){return $window.toastr?void $window.toastr.error(message,title?title:""):void logError("(toast) "+message,title)}function isEmptyObject(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}function queryStringToJson(query){var pairs=query.split("&"),result={};return pairs.forEach(function(pair){pair=pair.split("="),result[pair[0]]=decodeURIComponent(pair[1]||"")}),JSON.parse(JSON.stringify(result))}function debounce(fn,fireRateMs){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout(function(){fn.apply(context,args)},fireRateMs)}}var enableDebugLogging=!0,svc={getLogFn:getLogFn,isEmptyObject:isEmptyObject,queryStringToJson:queryStringToJson,debounce:debounce,toast:toastSuccess,toastInfo:toastInfo,toastWarning:toastWarning,toastError:toastError};$window.toastr&&($window.toastr.options.newestOnTop=!1,$window.toastr.options.closeMethod="fadeOut",$window.toastr.options.closeDuration=300,$window.toastr.options.closeEasing="swing",$window.toastr.options.timeOut=7500,$window.toastr.options.extendedTimeOut=1e4,$window.toastr.options.positionClass="toast-bottom-right");var logSuccess=getLogFn("utils","success"),logInfo=getLogFn("utils","info"),logWarn=getLogFn("utils","warn"),logError=getLogFn("utils","error");return svc}]),app.factory("localStorage",["$window",function($window){return{set:function(key,value){$window.localStorage.setItem(key,value)},get:function(key,defaultValue){return $window.localStorage[key]||defaultValue},setObject:function(key,value){$window.localStorage.setItem(key,JSON.stringify(value))},getObject:function(key){return JSON.parse($window.localStorage[key]||"{}")},clear:function(key){return $window.localStorage.removeItem(key)},space:function(){var length=0;return Object.keys($window.localStorage).forEach(function(key){length+=$window.localStorage[key].length}),length},keys:function(){return Object.keys($window.localStorage)}}}]),app.factory("sessionStorage",["$window",function($window){return{set:function(key,value){$window.sessionStorage[key]=value},get:function(key,defaultValue){return $window.sessionStorage[key]||defaultValue},setObject:function(key,value){$window.sessionStorage[key]=JSON.stringify(value)},getObject:function(key){return JSON.parse($window.sessionStorage[key]||"{}")},clear:function(key){return $window.sessionStorage.removeItem(key)}}}]),Array.prototype.contains=function(needle){for(var i in this)if(this.hasOwnProperty(i)&&this[i]===needle)return!0;return!1},Array.prototype.intersect=function(a){var b=this;return a.filter(function(e){return-1!==b.indexOf(e)?!0:void 0}).filter(function(e,i,c){return c.indexOf(e)===i})},Date.prototype.addDays=function(days){var dat=new Date(this.valueOf());return dat.setDate(dat.getDate()+days),dat},Date.prototype.subDays=function(days){var dat=new Date(this.valueOf());return dat.setDate(dat.getDate()-days),dat}}();